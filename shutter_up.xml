<macro name="shutter_up" icon="UP">
    <!-- サービス確認 -->
    <assert-service description="Ensure shutter control service" uuid="YOUR_SERVICE_UUID">
        <!-- 書き込み可能なキャラクタリスティック -->
        <assert-characteristic description="Ensure write characteristic" uuid="YOUR_WRITE_CHAR_UUID">
            <property name="WRITE_WITHOUT_RESPONSE" requirement="MANDATORY"/>
        </assert-characteristic>
        <!-- 通知可能なキャラクタリスティック -->
        <assert-characteristic description="Ensure notify characteristic" uuid="YOUR_NOTIFY_CHAR_UUID">
            <property name="NOTIFY" requirement="MANDATORY"/>
        </assert-characteristic>
    </assert-service>

    <!-- シャッター UP コマンド送信 (Frame 693) -->
    <write description="Write UP command (0100) to write characteristic"
           characteristic-uuid="YOUR_WRITE_CHAR_UUID"
           service-uuid="YOUR_SERVICE_UUID"
           value="0100"
           type="WRITE_REQUEST"/>
    
    <!-- デバイス ACK (Frame 696) を待つ -->
    <wait-for-notification description="Wait for write response (ACK)"
                           characteristic-uuid="YOUR_WRITE_CHAR_UUID"
                           service-uuid="YOUR_SERVICE_UUID"/>

    <!-- Optional: Frame 699 の追加コマンド送信 -->
    <write description="Optional: Additional control (Frame 699)" 
           characteristic-uuid="YOUR_WRITE_CHAR_UUID"
           service-uuid="YOUR_SERVICE_UUID"
           value="030b0000"
           type="WRITE_COMMAND"/>

    <!-- デバイスの通知を受信 (Frame 701) -->
    <wait-for-notification description="Wait for device status notification"
                           characteristic-uuid="YOUR_NOTIFY_CHAR_UUID"
                           service-uuid="YOUR_SERVICE_UUID">
        <!-- 必要に応じて通知値の検証も可能 -->
        <!-- <assert-value description="Check status value" value="000018006c"/> -->
    </wait-for-notification>
</macro>
